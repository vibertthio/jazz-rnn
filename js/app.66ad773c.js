!function(t){function e(e){for(var o,s,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)s=i[d],r[s]&&p.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);for(l&&l(e);p.length;)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(o=!1)}o&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={0:0},a=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;a.push([122,1]),n()}({122:function(t,e,n){"use strict";n.r(e);n(43),n(38),n(55),n(60);var o=n(68),r=n.n(o),a=(n(89),n(90),n(0)),s=n.n(a),i=n(27),c=n.n(i);function u(t,e,n,o,r,a,s){try{var i=t[a](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(o,r)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(o,r){var a=t.apply(e,n);function s(t){u(a,o,r,s,i,"next",t)}function i(t){u(a,o,r,s,i,"throw",t)}s(void 0)})}}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.constants={},this.server={},this.tone={},this.scores={},this.sounds={},this.parts={},this.initConstants(),this.initServerConnection(),this.initSounds()}var e,n,o;return e=t,(n=[{key:"initConstants",value:function(){var t={CHRD:0,MLDY:1,BASS:2,DRUM:3},e=[t.CHRD,t.MLDY,t.BASS],n=[t.DRUM],o=[t.CHRD,t.MLDY,t.BASS,t.DRUM];this.constants={ServerURL:"http://musicai.citi.sinica.edu.tw/jazzrnn/api/",APIS:{META:"getStaticMeta",CHRD:"getStaticChordProgression",ALL:"getStaticIntegration",V_META:"getMetaData",V_CHRD:"postVarianceChordProgression",V_ALL:"postIntegration"},Instruments:t,ToneInstruments:e,DrumInstruments:n,AllInstruments:o}}},{key:"initServerConnection",value:function(){var t=this,e=function(){var e=l(regeneratorRuntime.mark(function e(){var n,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.constants.ServerURL+t.constants.APIS.META,e.next=3,fetch(n,{method:"GET",headers:{accept:"application/json","content-type":"application/json"}});case 3:return o=e.sent,e.next=6,o.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),n=function(){var e=l(regeneratorRuntime.mark(function e(){var n,o,r,a,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:0,o=t.constants.ServerURL+t.constants.APIS.ALL,e.next=4,fetch(o,{method:"POST",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({ChordIdx:n})});case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),o=function(){var e=l(regeneratorRuntime.mark(function e(){var n,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.constants.ServerURL+t.constants.APIS.V_META,e.next=3,fetch(n,{method:"GET",headers:{accept:"application/json","content-type":"application/json"}});case 3:return o=e.sent,e.next=6,o.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),r=function(){var e=l(regeneratorRuntime.mark(function e(){var n,o,r,a,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:0,o=t.constants.ServerURL+t.constants.APIS.V_CHRD,e.next=4,fetch(o,{method:"POST",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({ChordIdx:n})});case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),a=function(){var e=l(regeneratorRuntime.mark(function e(){var n,o,r,a,s,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:0,i.length>1&&void 0!==i[1]?i[1]:1,o=i.length>2&&void 0!==i[2]?i[2]:1,r=t.constants.ServerURL+t.constants.APIS.V_ALL,e.next=6,fetch(r,{method:"POST",headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify({ChordIndex:n,DrumsIndex:0,NumberOfSample:10,MelodyNoteDensity:o,BassNoteDensity:o,UseDrumFillin:!1})});case 6:return a=e.sent,e.next=9,a.json();case 9:return s=e.sent,e.abrupt("return",s);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();this.server={getStaticMeta:e,getStaticIntegration:n,postVarianceMeta:o,postVarianceChordProgression:r,postVarianceIntegration:a}}},{key:"initSounds",value:function(){var t=this;this.tone=s.a;var e=s.a.context,n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:220,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return t.map(function(t){var r=t.end,a=t.pitch,i=t.start,c=t.velocity,u=.5/e*(r-i);return{time:(i+4*e*8*o)*(.5/e),note:s.a.Frequency(a+12*n,"midi").toNote(),duration:u,vel:c/128}})},o=function(){var e=l(regeneratorRuntime.mark(function e(){var o,r,s,i,c,u,l,d,p=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>0&&void 0!==p[0]?p[0]:0,e.next=3,t.server.getStaticIntegration(o);case 3:r=e.sent,console.log("[ id: ".concat(o," ] loaded!")),s=n(r.ProgressionsData.Bass,220,-1),(i=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.bassSound.play(o,e,{gain:a,duration:r})},s)).loop=!0,i.loopEnd=16,c=n(r.ProgressionsData.Melody,220),(u=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.melodySound.play(o,e,{gain:a,duration:r})},c)).loop=!0,u.loopEnd=16,l=n(r.ProgressionsData.Chord,220),(d=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.chordsSound.play(o,e,{gain:a,duration:r})},l)).loop=!0,d.loopEnd=16,t.parts={data:r,bassPart:i,chordsPart:d,melodyPart:u};case 18:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),r=function(){var e=l(regeneratorRuntime.mark(function e(){var o,r,s,i,c,u,l,d,p,h,v,f,g=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=g.length>0&&void 0!==g[0]?g[0]:0,r=g.length>1&&void 0!==g[1]?g[1]:1,s=g.length>2&&void 0!==g[2]?g[2]:1,i=g.length>3&&void 0!==g[3]?g[3]:0,console.log("Data start loading..."),e.next=7,t.server.postVarianceIntegration(o,r,s);case 7:c=e.sent,console.log("Data loaded: single [ id: ".concat(o,", melodyId: ").concat(i,", dense: ").concat(s,", temp: ").concat(r," ]")),console.log(c),u=c.Data[i],l=n(u.Bass.Notes,u.Bass.BeatResolutions,-1),(d=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.bassSound.play(o,e,{gain:a,duration:r})},l)).loop=!0,d.loopEnd=16,p=n(u.Melody.Notes,u.Melody.BeatResolutions),(h=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.melodySound.play(o,e,{gain:a,duration:r})},p)).loop=!0,h.loopEnd=16,v=n(u.Chord.Notes,u.Chord.BeatResolutions),(f=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.chordsSound.play(o,e,{gain:a,duration:r})},v)).loop=!0,f.loopEnd=16,t.parts={response:c,data:u,bassPart:d,chordsPart:f,melodyPart:h};case 24:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),i=function(){var e=l(regeneratorRuntime.mark(function e(){var o,r,s,i,c,u,l,d,p,h,v,f,g=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=g.length>0&&void 0!==g[0]?g[0]:0,r=g.length>1&&void 0!==g[1]?g[1]:1,s=g.length>2&&void 0!==g[2]?g[2]:1,g.length>3&&void 0!==g[3]?g[3]:3,e.next=6,t.server.postVarianceIntegration(o,r,s);case 6:return i=e.sent,console.log("Data loaded: progression (1/3) [ id: ".concat(o,", dense: ").concat(s,", temp: ").concat(r," ]")),e.next=10,t.server.postVarianceIntegration(o,r,s+.75);case 10:return c=e.sent,console.log("Data loaded: progression (2/3) [ id: ".concat(o,", dense: ").concat(s+.75,", temp: ").concat(r," ]")),e.next=14,t.server.postVarianceIntegration(o,r,s-.25);case 14:u=e.sent,console.log("Data loaded: progression (3/3) [ id: ".concat(o,", dense: ").concat(s-.25,", temp: ").concat(r," ]")),l=n(i.Data[0].Bass.Notes,i.Data[0].Bass.BeatResolutions,-1).concat(n(c.Data[0].Bass.Notes,i.Data[0].Bass.BeatResolutions,-1,1)).concat(n(u.Data[0].Bass.Notes,i.Data[0].Bass.BeatResolutions,-1,2)),(d=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.bassSound.play(o,e,{gain:a,duration:r})},l)).loop=!0,d.loopEnd=48,p=n(i.Data[0].Melody.Notes,i.Data[0].Melody.BeatResolutions).concat(n(c.Data[0].Melody.Notes,i.Data[0].Melody.BeatResolutions,0,1)).concat(n(u.Data[0].Melody.Notes,i.Data[0].Melody.BeatResolutions,0,2)),(h=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.melodySound.play(o,e,{gain:a,duration:r})},p)).loop=!0,h.loopEnd=48,v=n(i.Data[0].Chord.Notes,i.Data[0].Chord.BeatResolutions).concat(n(c.Data[0].Chord.Notes,i.Data[0].Chord.BeatResolutions,0,1)).concat(n(u.Data[0].Chord.Notes,i.Data[0].Chord.BeatResolutions,0,2)),(f=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.chordsSound.play(o,e,{gain:a,duration:r})},v)).loop=!0,f.loopEnd=48,t.parts={data:i,datas:[i,c,u],bassPart:d,chordsPart:f,melodyPart:h};case 29:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),u=function(){var n=l(regeneratorRuntime.mark(function n(){var o,r,i,u,l,d,p,h,v,f,g,m;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=new s.a.Gain(.3),r=new s.a.Freeverb(.7,1e3),i=new s.a.EQ3(0,-5,0),u=new s.a.Gain(.6),n.next=6,c.a.instrument(e,"acoustic_grand_piano",{soundfont:"MusyngKite",destination:i,adsr:[.02,.3,.9,1.5]});case 6:return l=n.sent,i.chain(u,r,o,a.Master),i.chain(u,a.Master),console.log("Melody sounds loaded!"),d=new s.a.EQ3(-10,-2,-5),p=new s.a.Gain(1),n.next=14,c.a.instrument(e,"electric_piano_1",{soundfont:"MusyngKite",destination:d});case 14:return h=n.sent,d.chain(p,r,o,a.Master),d.chain(p,a.Master),console.log("Chords sounds loaded!"),v=new s.a.EQ3(0,0,0),f=new s.a.Gain(.4),n.next=22,c.a.instrument(e,"acoustic_bass",{soundfont:"MusyngKite",destination:v});case 22:g=n.sent,v.chain(f,a.Master),console.log("Bass sounds loaded!"),m=function(e){t.sounds.volume=.01*e;var n=20*Math.log(.01*e);a.Master.volume.value=n},t.sounds={volume:1,sendReverb:r,sendReverbGain:o,changeMasterVolume:m,melodySound:l,melodyGain:u,chordsSound:h,chordsGain:p,bassSound:g,bassGain:f};case 27:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}();this.scores={initParts:o,initVarianceParts:r,initVarianceProgression:i,changeMelodyId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=t.parts.response,r=o.Data[e],s=n(r.Bass.Notes,r.Bass.BeatResolutions,-1),i=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.bassSound.play(o,e,{gain:a,duration:r})},s);i.loop=!0,i.loopEnd=16;var c=n(r.Melody.Notes,r.Melody.BeatResolutions),u=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.melodySound.play(o,e,{gain:a,duration:r})},c);u.loop=!0,u.loopEnd=16;var l=n(r.Chord.Notes,r.Chord.BeatResolutions),d=new a.Part(function(e,n){var o=n.note,r=n.duration,a=n.vel;t.sounds.chordsSound.play(o,e,{gain:a,duration:r})},l);d.loop=!0,d.loopEnd=16,t.parts={response:o,data:r,bassPart:i,chordsPart:d,melodyPart:u}},loadSoundFonts:u,stopAll:function(){t.parts.chordsPart.stop(),t.parts.melodyPart.stop(),t.parts.bassPart.stop(),t.sounds.chordsSound.stop(),t.sounds.melodySound.stop(),t.sounds.bassSound.stop()},startAll:function(){t.parts.bassPart.start(),t.parts.melodyPart.start(),t.parts.chordsPart.start()},changeScores:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}}}])&&d(e.prototype,n),o&&d(e,o),t}(),h=(n(106),n(110),n(111),n(112),n(64),n(118),n(120),["rgba(53, 53, 53, 1)","rgba(60, 110, 113, 1)","rgba(255, 255, 255, 1)","rgba(217, 217, 217, 1)","rgba(40, 75, 99, 1)","rgba(80, 80, 80, 1)","#ff9e74"]),v=n(69),f=n.n(v);function g(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.melody=[],this.loading=!0,this.currentPosition=0,this.canvas=document.getElementById(this.id),this.hoveringNotes=!0,this.hoveringSounds=!1,this.waiting=!1}var e,n,o;return e=t,(n=[{key:"updateMelody",value:function(t){this.loading=!1,this.melody=t}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.canvas=document.getElementById(this.id);var e=f()(this.canvas);this.canvas.width=0|e[0],this.canvas.height=0|e[1];var n=this.canvas.width,o=this.canvas.height,r=n-10,a=o-10,s=this.canvas.getContext("2d"),i=7040*t;if(s.save(),s.clearRect(0,0,n,o),s.translate(5,5),this.drawAnchorPoints(s,r,a,r/16),this.drawProgress(s,r,a,t),!this.loading&&!this.hoveringNotes){s.save();var c=r/7040,u=a/64,l=!0,d=!1,p=void 0;try{for(var v,g=this.melody[Symbol.iterator]();!(l=(v=g.next()).done);l=!0){var m=v.value,y=m.start,w=m.end,P=m.pitch,b=(m.velocity,w-y);s.save(),s.translate(y*c,(64-(P-28))*u),this.waiting?s.fillStyle=h[5]:s.fillStyle=h[3],i>=y&&i<w?(s.fillStyle=h[6],s.translate(-b*c*.1,-2.5),s.fillRect(0,0,b*c*1.1,2*u)):s.fillRect(0,0,b*c*.8,u),s.restore()}}catch(t){d=!0,p=t}finally{try{l||null==g.return||g.return()}finally{if(d)throw p}}s.restore()}s.restore()}},{key:"drawAnchorPoints",value:function(t,e,n,o){t.save();for(var r=e/o,a=n/o,s=0;s<=r;s+=1)for(var i=0;i<=a+1;i+=1){if(t.save(),t.fillStyle=h[5],t.translate(s*o,i*o),this.hoveringNotes){t.fillStyle=h[6];var c=3*Math.sin(.002*Date.now()-.1*s+.1*i);t.beginPath(),t.arc(0,0,Math.abs(2*c*.5),0,2*Math.PI),t.fill()}else t.fillRect(0,0,2,2);t.restore()}t.restore()}},{key:"drawProgress",value:function(t,e,n,o){t.save(),t.strokeStyle=h[6],t.fillStyle=h[6],t.translate(e*o,0),t.beginPath(),t.arc(0,0,.03*n,0,2*Math.PI),t.fill(),t.beginPath(),t.moveTo(0,0),t.lineTo(0,n),t.stroke(),t.translate(0,n),t.beginPath(),t.arc(0,0,.03*n,0,2*Math.PI),t.fill(),t.restore()}}])&&g(e.prototype,n),o&&g(e,o),t}();function y(t,e,n,o,r,a,s){try{var i=t[a](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(o,r)}function w(t){return function(){var e=this,n=arguments;return new Promise(function(o,r){var a=t.apply(e,n);function s(t){y(a,o,r,s,i,"next",t)}function i(t){y(a,o,r,s,i,"throw",t)}s(void 0)})}}var P=new p,b=new m("canvas-1"),S=new m("canvas-2"),x=new m("canvas-3"),R=P.tone,M=R.context,B=!0,N=!0,C=4,D=0,I=0,E=0,k=!0,A=0,j=function(){document.getElementById("play").firstChild.textContent="stop",N=!0,P.scores.startAll()},V=function(){document.getElementById("play").firstChild.textContent="play",N=!1,P.scores.stopAll()},T=function(t){R.Transport.bpm.value=t},O=function(t){var e=t.Bass,n=t.Chord,o=(t.Drums,t.Melody);b.updateMelody(n.Notes),S.updateMelody(o.Notes),x.updateMelody(e.Notes)},L=function(){var t=w(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.server.postVarianceMeta();case 2:return e=t.sent,console.log("MetaData loaded!"),E=e.MetaData.NumChordProgression,t.next=7,P.scores.loadSoundFonts();case 7:return t.next=9,P.scores.initVarianceParts(C);case 9:P.scores.startAll(),console.log("Soundfonts loaded!"),T(120),R.Master.volume.value=20*Math.log(.8),R.Transport.start(),document.getElementById("play").firstChild.textContent="stop",B=!1,b.hoveringNotes=!1,S.hoveringNotes=!1,x.hoveringNotes=!1,O(P.parts.data);case 21:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),_=function t(){var e=function(){var t=0;if(P.parts.chordsPart&&!B)if(k)t=P.parts.chordsPart.progress;else{t=3*P.parts.chordsPart.progress;var e=Math.floor(t);A!=e&&(console.log("progress: ".concat(e+1,"/").concat(3)),A=e,document.getElementById("long").firstChild.textContent="".concat(A+1,"/3"),O(P.parts.datas[A])),t-=e}return t}();b.draw(e),S.draw(e),x.draw(e),requestAnimationFrame(function(){t()})};r()(M,"#play",function(){var t,e,n,o=document.getElementById("play");console.log("AudioContext started!"),console.log("start loading..."),o.firstChild.textContent="loading",console.log("%c Jazz RNN ","background: #222; color: #f70ec4; font-size: 15px;"),console.log("%c 2019-05-20 ","background: #fff; color: #f70ec4; font-size: 10px;"),console.log("%c made by Vibert Thio","background: #fff; color: #f70ec4; font-size: 10px;"),L(),document.getElementById("play").onclick=function(){B||(N?V():j())},document.getElementById("reload").onclick=w(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(B){t.next=18;break}return V(),B=!0,k=!0,b.hoveringNotes=!0,S.hoveringNotes=!0,x.hoveringNotes=!0,document.getElementById("play").firstChild.textContent="loading",C=Math.floor(Math.random()*E),t.next=12,P.scores.initVarianceParts(C,1,I,D);case 12:O(P.parts.data),B=!1,b.hoveringNotes=!1,S.hoveringNotes=!1,x.hoveringNotes=!1,j();case 18:case"end":return t.stop()}},t)})),document.getElementById("long").onclick=w(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(B){t.next=19;break}if(!k){t.next=19;break}return N&&P.scores.stopAll(),B=!0,b.hoveringNotes=!0,S.hoveringNotes=!0,x.hoveringNotes=!0,document.getElementById("play").firstChild.textContent="loading",D=Math.floor(10*Math.random()),console.log("new melody id: ".concat(D)),t.next=13,P.scores.changeMelodyId(D);case 13:O(P.parts.data),B=!1,b.hoveringNotes=!1,S.hoveringNotes=!1,x.hoveringNotes=!1,j();case 19:case"end":return t.stop()}},t)})),document.getElementById("volume").onchange=function(t){P.sounds.changeMasterVolume(t.target.value)},document.getElementById("bpm").onchange=function(t){T(t.target.value)},document.getElementById("s1").onchange=function(t){var e=.01*t.target.value;P.sounds.sendReverbGain.gain.value=e},document.getElementById("s2").onchange=function(t){var e=.01*t.target.value;P.sounds.sendReverb.roomSize.value=e},document.getElementById("s3").onchange=(n=w(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(B){t.next=17;break}return I=.01*e.target.value,V(),B=!0,b.hoveringNotes=!0,S.hoveringNotes=!0,x.hoveringNotes=!0,document.getElementById("play").firstChild.textContent="loading",t.next=11,P.scores.initVarianceParts(C,1,I);case 11:O(P.parts.data),B=!1,b.hoveringNotes=!1,S.hoveringNotes=!1,x.hoveringNotes=!1,j();case 17:case"end":return t.stop()}},t)})),function(t){return n.apply(this,arguments)}),document.getElementById("s5").onchange=(e=w(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=.01*e.target.value,P.sounds.melodyGain.gain.value=n;case 2:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)}),document.getElementById("s6").onchange=(t=w(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=.01*e.target.value,P.sounds.chordsGain.gain.value=n;case 2:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),requestAnimationFrame(function(){_()})})},89:function(t,e,n){}});
//# sourceMappingURL=app.66ad773c.js.map